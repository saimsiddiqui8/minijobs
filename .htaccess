RewriteEngine On
RewriteBase /

# ✅ Rewrite /state/minijob-brandenburg to /minijob-brandenburg.html
RewriteRule ^state/minijob-brandenburg$ /minijob-brandenburg.html [L]
RewriteRule ^state/minijob-bayern$ /minijob-bayern.html [L]

# ✅ Redirect plain /minijob-bayern to /state/minijob-bayern
RewriteRule ^minijob-bayern$ /state/minijob-bayern [R=301,L]


# ✅ Rewrite any request under /state/ to root (for assets to load correctly)
RewriteCond %{REQUEST_URI} ^/state/
RewriteRule ^state/(.*)$ /$1 [L]

# Redirect URLs from /city/minijob-* to /minijob-*
RewriteRule ^city/minijob-(.*)$ /minijob-$1 [R=301,L]

RewriteRule ^in-(.*)$ /minijob-$1 [R=301,L]

# Redirect /redirect/{encoded-url} to /redirect.html?url={encoded-url}
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^redirect/(.*)$ /redirect.html?url=$1 [L,QSA]

# ✅ Serve "job-detail.html" for "job-detail/{slug}" URLs
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^job-detail/[^/]+$ /job-detail.html [L,QSA]

# Check if the requested file exists as .html
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

# Custom 404 Error Page
ErrorDocument 404 /404.html